{% extends 'master.html' %}

{% load static %}
{% block  content %}
    <link rel="stylesheet" href="{% static 'styles/search.css' %}">
    <h1>Search results: {{request.GET.query}}</h1>
    <h2><span id="result_len">{{result_len}}</span> has been found</h2>
    <form action="{% url 'recipe_search' %}" method="get">
        <input id="query" type="hidden" name="query" value="{{request.GET.query}}">
        <label for="your_name">Your ingredients here: </label>
        <input id="ingredients_to_include" type="text" name="ingredients_to_include" value="{{request.GET.ingredients_to_include}}"><br>

        <label for="your_name">Your ingredients to exclude here: </label>
        <input id="ingredients_to_exclude" type="text" name="ingredients_to_exclude" value="{{request.GET.ingredients_to_exclude}}"><br>

        <label for="tag">tag</label>
        <select id="tag" name="tag">
            <option value="">---</option>
            {% for tag in tags%}
                <option value="{{tag}}" {% ifequal request.GET.tag tag.nombre %} selected {% endifequal %}>{{tag}}</option>
            {% endfor %}
        </select>
        <br>
        <input id="page_num" type="number" name="page_num" value="{{request.GET.page_num}}"><br>
        <input id="page_len" type="number" name="page_len" min="15" max="30" step="5" value="{{request.GET.page_len}}">
        <input type="submit" value="Submit">
        {% if errors%}
            {% for error in errors%}
            <div>
                <p>{{error}}</p>
            </div>
            {% endfor %}
        {% endif %}
    </form>
    <script type="text/javascript" src="{% static "js/pagination.js" %}"></script>
    <div class="container">
        {% for recipe in recipes %}
        <div>
            <a href="{% url 'get_by_href' url=recipe.href %}"><img src="{{recipe.image}}" width="150"></img></a>
            <h2>{{recipe.title}}</h2>
        </div>
        {% endfor %}
    </div>
{% endblock %}